<!DOCTYPE html>
<html>
  <head>

    <!-- Set encoding -->
    <meta charset="utf-8">

    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, user-scalable=no">

    <!-- Use title from page frontmatter -->
    <title>{{title}} | lone goose press</title>

    <!-- Link to favicon -->
    <!-- <link rel="shortcut icon" href="{{relativePath}}assets/img/favicon.ico"> -->

    <!-- stylesheets -->
    <link rel="stylesheet" href="/assets/css/style.css">
    <script type="text/javascript" src="https://js.squareup.com/v2/paymentform"></script>
  <script>

    var applicationId = 'sandbox-sq0idp-uKi6fG7bQyJNdtcx2Kqagg'; // <-- Add your application's ID here

    // You can delete this 'if' statement. It's here to notify you that you need
    // to provide your application ID.
    if (applicationId == '') {
      alert('You need to provide a value for the applicationId variable.');
    }

    // Initializes the payment form. See the documentation for descriptions of
    // each of these parameters.
    var paymentForm = new SqPaymentForm({
      applicationId: applicationId,
      inputClass: 'sq-input',
      inputStyles: [
        {
          fontSize: '15px'
        }
      ],
      cardNumber: {
        elementId: 'sq-card-number',
        placeholder: '•••• •••• •••• ••••'
      },
      cvv: {
        elementId: 'sq-cvv',
        placeholder: 'CVV'
      },
      expirationDate: {
        elementId: 'sq-expiration-date',
        placeholder: 'MM/YY'
      },
      postalCode: {
        elementId: 'sq-postal-code'
      },
      callbacks: {
        // Called when the SqPaymentForm completes a request to generate a card
        // nonce, even if the request failed because of an error.
        cardNonceResponseReceived: function(errors, nonce, cardData) {
          if (errors) {
            console.log("Encountered errors:");

            // This logs all errors encountered during nonce generation to the
            // Javascript console.
            errors.forEach(function(error) {
              console.log('  ' + error.message);
            });

          // No errors occurred. Extract the card nonce.
          } else {

            // Delete this line and uncomment the lines below when you're ready
            // to start submitting nonces to your server.
            // alert('Nonce received: ' + nonce);
            console.log(`we have a nice nonce: ${nonce}`)
            console.log(`time to send that sucker to our payment api`)


            /*
              These lines assign the generated card nonce to a hidden input
              field, then submit that field to your server.
              Uncomment them when you're ready to test out submitting nonces.

              You'll also need to set the action attribute of the form element
              at the bottom of this sample, to correspond to the URL you want to
              submit the nonce to.
            */
            // document.getElementById('card-nonce').value = nonce;
            // document.getElementById('nonce-form').submit();

          }
        },

        unsupportedBrowserDetected: function() {
          // Fill in this callback to alert buyers when their browser is not supported.
        },

        // Fill in these cases to respond to various events that can occur while a
        // buyer is using the payment form.
        inputEventReceived: function(inputEvent) {
          switch (inputEvent.eventType) {
            case 'focusClassAdded':
              // Handle as desired
              break;
            case 'focusClassRemoved':
              // Handle as desired
              break;
            case 'errorClassAdded':
              // Handle as desired
              break;
            case 'errorClassRemoved':
              // Handle as desired
              break;
            case 'cardBrandChanged':
              // Handle as desired
              break;
            case 'postalCodeChanged':
              // Handle as desired
              break;
          }
        },

        paymentFormLoaded: function() {
          // Fill in this callback to perform actions after the payment form is
          // done loading (such as setting the postal code field programmatically).
          // paymentForm.setPostalCode('94103');
        }
      }
    });

    // This function is called when a buyer clicks the Submit button on the webpage
    // to charge their card.
    function requestCardNonce(event) {

      // This prevents the Submit button from submitting its associated form.
      // Instead, clicking the Submit button should tell the SqPaymentForm to generate
      // a card nonce, which the next line does.
      event.preventDefault();

      paymentForm.requestCardNonce();
    }
    </script>

    <!--
      These styles can live in a separate .css file. They're just here to keep this
      example to a single file.
    -->
    <style type="text/css">
      .sq-input {
        border: 1px solid rgb(223, 223, 223);
        outline-offset: -2px;
        margin-bottom: 5px;
      }
      .sq-input--focus {
        /* Indicates how form inputs should appear when they have focus */
        outline: 5px auto rgb(59, 153, 252);
      }
      .sq-input--error {
        /* Indicates how form inputs should appear when they contain invalid values */
        outline: 5px auto rgb(255, 97, 97);
      }
    </style>
  </head>

    {% block head %}{% endblock %}
  </head>

  <body class="no-cart">
    <div class="wrapper">
      <div class="expanding js-expanding">
        <section class="expanding-menu js-expanding" data-expanding="menu">
          <div class="grid-container padding-trailer-half">
            <div class="column-24 text-center leader-half trailer-1">
              <a href="#" class="site-nav-toggle js-expanding-toggle" data-expanding="menu">close</a>
            </div>
            <div class="column-5 pre-9 tablet-pre-3 leader-2 phone-leader-0">
              <ul>
                <li><a href="/">Home</a></li>
                <li><a href="/about/">About the Press</a></li>
                <li><a href="/publications/">Publications</a>
                  <ul>
                    <li><a href="/publications/broadsides/">Broadsides</a></li>
                    <li><a href="/publications/books/">Books</a></li>
                    <li><a href="/publications/poetic-prayer-flags/">Poetic Prayer Flags</a></li>
                    <li><a href="/publications/ephemera/">Chapbooks, Ephemera</a></li>
                  </ul>
                </li>
                <li><a href="/commisions/">Commissions</a>
                  <ul>
                    <li><a href="/commisions/design/">Design</a></li>
                    <li><a href="/commisions/publishing/">Publishing</a></li>
                    <li><a href="/commisions/realization/">Realization</a></li>
                  </ul>
                </li>
                <li><a href="http://blog.lonegoosepress.com/">Blog</a></li>
                <li><a href="/contact/">Contact</a></li>
              </ul>
            </div>
          </div>
        </section>
      </div>

      {% if homepage %}
        <nav class='site-nav site-nav-homepage'>
      {% else %}
        <nav class='site-nav trailer-2'>
      {% endif %}
        <div class="grid-container text-center leader-half trailer-half" >
          <div class="column-12 tablet-column-10 tablet-pre-1 phone-column-4 phone-pre-1 pre-6">
            <a href="#" class="site-nav-toggle js-expanding-toggle" data-expanding="menu">menu</a>
          </div>
        </div>
      </nav>
      <div class="grid-container">
        <div class="column-18 pre-3 leader-3">
          <div class="js-cart-overview"></div>


          <label>Card Number</label>
          <div id="sq-card-number"></div>
          <label>CVV</label>
          <div id="sq-cvv"></div>
          <label>Expiration Date</label>
          <div id="sq-expiration-date"></div>
          <label>Postal Code</label>
          <div id="sq-postal-code"></div>

          <form id="nonce-form" novalidate action="REPLACE_ME" method="post">
            <!--
              Whenever a nonce is generated, it's assigned as the value of this hidden
              input field.
            -->
            <input type="hidden" id="card-nonce" name="nonce">
            <!--
              Clicking this Submit button kicks off the process to generate a card nonce
              from the buyer's card information.
            -->
            <p class="leader-1 font-size-2">
              <button class="btn right" type="submit" onclick="requestCardNonce(event)">Pay with Card</button>
            </p>
          </form>
          <!-- {% block content %}{% endblock %} -->
        </div>
      </div>



      <div class="grid-container">
        {% include '../_partials/inline-menu.html' %}
      </div>
    </div>

    {% include '../_partials/footer.html' %}

    <script src="/assets/js/bundle.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-59828723-1', 'auto');
      ga('send', 'pageview');

    </script>

  </body>
</html>
